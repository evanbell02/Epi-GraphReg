# EpiGraphReg

### Environment setup
The conda environment needed to run all scripts in this repository can be created using `conda env create -f environment.yml`. The created environment is called `EGR`, unless another name is specified.

### Preparing data
Sythetic data may be generated by running `scripts/make_data.py`. The data generated by this script is also already available in the `data` folder.

### Training and testing models 
All model training and testing occurs using the PyTorch Lighntning command line interface (CLI), and all training settings can easily be configured using `.yml` config files or command line arguments. For example, to train the Epi-GraphReg model, one would run `python scripts/train_epi_graph_reg.py fit -c configs/train_settings.yml`. Testing can also be performed with the Lightning CLI by specifying a checkpoint path.

The default dataset used for training is the dataset that contains enhancers as regulatory elements only. In order to train on the dataset that has both enhancers and silencers, add the flag `--data.data_type='enhancers_and_silencers` to the training command.

### Pretrained models
Complete checkpoints of pretrained models for both datasets are available in the `pretrained_models` directory

### Notebooks and figures

The Jupyter notebooks used to generate figures, as well as the output figures, are available in the `notebooks` directory.
